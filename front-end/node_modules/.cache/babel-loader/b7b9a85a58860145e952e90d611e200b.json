{"ast":null,"code":"var _jsxFileName = \"/Users/Matt/Documents/GitHub/MELODIA/front-end/src/components/Recommendations.js\";\nimport React, { useState, useEffect } from 'react';\nimport './Artists.css';\nimport RecomItem from './RecomItems';\nimport axios from 'axios';\nimport { Button, playlistButtonReco } from './Button';\nimport { Link } from 'react-router-dom';\nimport Popup from './Popup';\n\nfunction Recommendations() {\n  const [ArtistReco, setArtists] = useState([]);\n  const [TracksReco, setTracks] = useState([]);\n  const [Recommendations, setReco] = useState([]);\n  const [genres, setGenres] = useState([]);\n  const [isOpen, setIsOpen] = useState(false);\n  let count = 1;\n  useEffect(() => {\n    axios.get('http://localhost:5000/artists').then(response => {\n      setArtists(response.data.items);\n    });\n  }, []);\n\n  const togglePopup = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const Artits_reco_id = ArtistReco.map(artist => {\n    return artist.id;\n  });\n  useEffect(() => {\n    axios.get('http://localhost:5000/tracks').then(response => {\n      setTracks(response.data.items);\n    });\n  }, []);\n  const Tracks_reco_id = TracksReco.map(track => {\n    return track.id;\n  });\n  useEffect(() => {\n    axios.get('http://localhost:5000/artists').then(response => {\n      let genres_count = {};\n      response.data.items.map(artist => artist.genres.map(genre => genres_count[genre] = (genres_count[genre] || 0) + 1));\n      let items = Object.keys(genres_count).map(function (key) {\n        return [key, genres_count[key]];\n      }).sort(function (first, second) {\n        //console.log(first)\n        return second[1] - first[1];\n      });\n      let itemsGenres = [];\n      items.forEach(item => {\n        itemsGenres.push(item[0]);\n      });\n      setGenres(itemsGenres);\n    });\n  }, []);\n\n  function reco(artist, genres, tracks) {\n    axios.get(`http://localhost:5000/recommendations/${artist}/${genres}/${tracks}`).then(response => {\n      setReco(response.data.tracks);\n    });\n  }\n\n  console.log(Recommendations);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, \"Recommended for you\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"btn__items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Create Your Playlist\",\n    onClick: togglePopup,\n    className: \"cards__item__link btn-unselected btn btn--primary btn--large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }), isOpen && /*#__PURE__*/React.createElement(Popup, {\n    handleClose: togglePopup,\n    theList: Recommendations,\n    type: \"Recs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 28\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, Recommendations.length === 0 ? reco(Artits_reco_id[0], genres.slice(0, 3).join().replace(/ /g, \"%20\"), Tracks_reco_id[0]) : /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"cards__items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, Recommendations.map(reco => /*#__PURE__*/React.createElement(RecomItem, {\n    src: reco.album.images[0].url,\n    text: reco.name,\n    path: reco.external_urls.spotify,\n    label: count++,\n    text1: reco.album.artists[0].name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }))))));\n}\n\nexport default Recommendations;","map":{"version":3,"sources":["/Users/Matt/Documents/GitHub/MELODIA/front-end/src/components/Recommendations.js"],"names":["React","useState","useEffect","RecomItem","axios","Button","playlistButtonReco","Link","Popup","Recommendations","ArtistReco","setArtists","TracksReco","setTracks","setReco","genres","setGenres","isOpen","setIsOpen","count","get","then","response","data","items","togglePopup","Artits_reco_id","map","artist","id","Tracks_reco_id","track","genres_count","genre","Object","keys","key","sort","first","second","itemsGenres","forEach","item","push","reco","tracks","console","log","length","slice","join","replace","album","images","url","name","external_urls","spotify","artists"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Artists.css';\nimport RecomItem from './RecomItems'\nimport axios from 'axios'\nimport { Button, playlistButtonReco} from './Button';\nimport { Link } from 'react-router-dom';\nimport Popup from './Popup'\n\n\n\nfunction Recommendations() {\n  const [ArtistReco, setArtists] = useState([])\n  const [TracksReco, setTracks] = useState([])\n  const [Recommendations, setReco] = useState([])\n  const [genres, setGenres] = useState([])\n  const [isOpen, setIsOpen] = useState(false);\n  \n  let count = 1;\n\n  useEffect(() => {\n    axios.get('http://localhost:5000/artists').then(response => {\n      setArtists(response.data.items);\n    });\n  }, [])\n\n  const togglePopup = () => {\n    setIsOpen(!isOpen);\n  }\n\n  const Artits_reco_id = ArtistReco.map(artist => {\n    return artist.id;\n  })\n\n  useEffect(() => {\n    axios.get('http://localhost:5000/tracks').then(response => {\n      setTracks(response.data.items);\n    });\n  }, [])\n\n  const Tracks_reco_id = TracksReco.map(track => {\n    return track.id;\n  })\n\n  useEffect(() => {\n    axios.get('http://localhost:5000/artists').then(response => {\n        let genres_count = {};\n        response.data.items.map(artist => (\n            artist.genres.map(genre => (\n            genres_count[genre] = (genres_count[genre] || 0) + 1\n            ))\n        ))\n        \n        let items = Object.keys(genres_count).map(function(key) {\n            return [key, genres_count[key]];\n        }).sort(function(first, second) {\n            //console.log(first)\n            return second[1] - first[1];\n        });\n\n        let itemsGenres = [];\n        items.forEach(item => {\n            itemsGenres.push(item[0]);\n        });\n        setGenres(itemsGenres)\n    });\n  }, []);\n\n  function reco(artist, genres, tracks){\n      axios.get(`http://localhost:5000/recommendations/${artist}/${genres}/${tracks}`).then(response => {\n      setReco(response.data.tracks); \n    });\n  }\n\n  console.log(Recommendations)\n\n  return (\n    <div className='cards'>\n      <h1>Recommended for you</h1>\n      <br />\n      <div className='btn__container'>\n        <div className='btn__wrapper'>\n          <ul className='btn__items'>\n            <div>\n                <input\n                  type=\"button\"\n                  value=\"Create Your Playlist\"\n                  onClick={togglePopup}\n                  className='cards__item__link btn-unselected btn btn--primary btn--large'\n                />\n                {isOpen && <Popup\n                  handleClose={togglePopup}\n                  theList={Recommendations}\n                  type=\"Recs\"\n                />}\n            </div>\n          </ul>\n        </div>\n      </div>\n      <div className='cards__container'>\n        <div className='cards__wrapper'>\n        {\n          Recommendations.length === 0 ? (\n          reco(Artits_reco_id[0], (genres.slice(0, 3).join()).replace(/ /g, \"%20\"), Tracks_reco_id[0])\n          ):(\n          <ul className='cards__items'>\n          {\n              Recommendations.map(reco => (\n              <RecomItem\n                src={reco.album.images[0].url}\n                text={reco.name}\n                path = {reco.external_urls.spotify} \n                label = {count++}\n                text1 = {reco.album.artists[0].name}\n                />\n              ))\n            }\n          </ul>\n          )}\n        </div>\n      </div> \n    </div> \n  );\n}\n\nexport default Recommendations;"]},"metadata":{},"sourceType":"module"}
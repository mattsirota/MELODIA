{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fatih\\\\Desktop\\\\MELODIA\\\\front-end\\\\src\\\\components\\\\Recommendations.js\";\nimport React, { useState, useEffect } from 'react';\nimport './Artists.css';\nimport RecomItem from './RecomItems';\nimport axios from 'axios';\nimport RecoDropdown from './RecoDropdown';\nimport { Link } from 'react-router-dom';\n\nfunction Recommendations() {\n  const [ArtistReco, setArtists] = useState([]);\n  const [TracksReco, setTracks] = useState([]);\n  const [Recommendations, setReco] = useState([]);\n  const [genres, setGenres] = useState([]);\n  const [selected, setSelected] = useState([]);\n  const [dropdown, setDropdown] = useState(false);\n\n  const onMouseEnter = () => {\n    if (window.innerWidth < 960) {\n      setDropdown(false);\n    } else {\n      setDropdown(true);\n    }\n  };\n\n  const onMouseLeave = () => {\n    if (window.innerWidth < 960) {\n      setDropdown(false);\n    } else {\n      setDropdown(false);\n    }\n  };\n\n  let count = 1;\n  useEffect(() => {\n    axios.get('http://localhost:5000/artists').then(response => {\n      setArtists(response.data.items);\n    });\n  }, []);\n  const Artits_reco_id = ArtistReco.map(artist => {\n    return artist.id;\n  });\n  useEffect(() => {\n    axios.get('http://localhost:5000/tracks').then(response => {\n      setTracks(response.data.items);\n    });\n  }, []);\n  const Tracks_reco_id = TracksReco.map(track => {\n    return track.id;\n  });\n  useEffect(() => {\n    axios.get('http://localhost:5000/artists').then(response => {\n      let genres_count = {};\n      response.data.items.map(artist => artist.genres.map(genre => genres_count[genre] = (genres_count[genre] || 0) + 1));\n      let items = Object.keys(genres_count).map(function (key) {\n        return [key, genres_count[key]];\n      }).sort(function (first, second) {\n        //console.log(first)\n        return second[1] - first[1];\n      });\n      let itemsGenres = [];\n      items.forEach(item => {\n        itemsGenres.push(item[0]);\n      });\n      setGenres(itemsGenres);\n    });\n  }, []);\n\n  function reco(artist, genres, tracks) {\n    axios.get(`http://localhost:5000/recommendations/${artist}/${genres}/${tracks}`).then(response => {\n      setReco(response.data.tracks);\n    });\n  }\n\n  function recoGenres(genres) {\n    axios.get(`http://localhost:5000/recommendations/${genres}`).then(response => {\n      setReco(response.data.tracks);\n      setSelected(genres);\n    });\n  }\n\n  console.log(Recommendations);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, \"Recommended for you\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"btn__items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, genres.map(genre => /*#__PURE__*/React.createElement(\"li\", {\n    className: \"cards__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards__item__link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, genre)))))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"reco-nav-item\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"reco-nav-links\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, \"Genres  \", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-caret-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  })), dropdown && /*#__PURE__*/React.createElement(RecoDropdown, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 22\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, Recommendations.length === 0 ? reco(Artits_reco_id[0], genres.slice(0, 3).join().replace(/ /g, \"%20\"), Tracks_reco_id[0]) : /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"cards__items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, Recommendations.map(reco => /*#__PURE__*/React.createElement(RecomItem, {\n    src: reco.album.images[0].url,\n    text: reco.name,\n    path: reco.external_urls.spotify,\n    label: count++,\n    text1: reco.album.artists[0].name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }))))));\n}\n\nexport default Recommendations;","map":{"version":3,"sources":["C:/Users/Fatih/Desktop/MELODIA/front-end/src/components/Recommendations.js"],"names":["React","useState","useEffect","RecomItem","axios","RecoDropdown","Link","Recommendations","ArtistReco","setArtists","TracksReco","setTracks","setReco","genres","setGenres","selected","setSelected","dropdown","setDropdown","onMouseEnter","window","innerWidth","onMouseLeave","count","get","then","response","data","items","Artits_reco_id","map","artist","id","Tracks_reco_id","track","genres_count","genre","Object","keys","key","sort","first","second","itemsGenres","forEach","item","push","reco","tracks","recoGenres","console","log","length","slice","join","replace","album","images","url","name","external_urls","spotify","artists"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Artists.css';\r\nimport RecomItem from './RecomItems'\r\nimport axios from 'axios'\r\nimport RecoDropdown from './RecoDropdown'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction Recommendations() {\r\n  const [ArtistReco, setArtists] = useState([])\r\n  const [TracksReco, setTracks] = useState([])\r\n  const [Recommendations, setReco] = useState([])\r\n  const [genres, setGenres] = useState([])\r\n  const [selected, setSelected] = useState([])\r\n  const [dropdown, setDropdown] = useState(false)\r\n\r\n  const onMouseEnter = () => {\r\n    if (window.innerWidth < 960) {\r\n      setDropdown(false);\r\n    } else {\r\n      setDropdown(true);\r\n    }\r\n  };\r\n\r\n  const onMouseLeave = () => {\r\n    if (window.innerWidth < 960) {\r\n      setDropdown(false);\r\n    } else {\r\n      setDropdown(false);\r\n    }\r\n  }; \r\n  let count = 1;\r\n  useEffect(() => {\r\n    axios.get('http://localhost:5000/artists').then(response => {\r\n      setArtists(response.data.items);\r\n    });\r\n  }, [])\r\n\r\n  const Artits_reco_id = ArtistReco.map(artist => {\r\n    return artist.id;\r\n  })\r\n\r\n  useEffect(() => {\r\n    axios.get('http://localhost:5000/tracks').then(response => {\r\n      setTracks(response.data.items);\r\n    });\r\n  }, [])\r\n\r\n  const Tracks_reco_id = TracksReco.map(track => {\r\n    return track.id;\r\n  })\r\n\r\n  useEffect(() => {\r\n    axios.get('http://localhost:5000/artists').then(response => {\r\n        let genres_count = {};\r\n        response.data.items.map(artist => (\r\n            artist.genres.map(genre => (\r\n            genres_count[genre] = (genres_count[genre] || 0) + 1\r\n            ))\r\n        ))\r\n        \r\n        let items = Object.keys(genres_count).map(function(key) {\r\n            return [key, genres_count[key]];\r\n        }).sort(function(first, second) {\r\n            //console.log(first)\r\n            return second[1] - first[1];\r\n        });\r\n\r\n        let itemsGenres = [];\r\n        items.forEach(item => {\r\n            itemsGenres.push(item[0]);\r\n        });\r\n        setGenres(itemsGenres)\r\n    });\r\n  }, []);\r\n\r\n  function reco(artist, genres, tracks){\r\n      axios.get(`http://localhost:5000/recommendations/${artist}/${genres}/${tracks}`).then(response => {\r\n      setReco(response.data.tracks); \r\n    });\r\n  }\r\n\r\n  function recoGenres(genres){\r\n    axios.get(`http://localhost:5000/recommendations/${genres}`).then(response => {\r\n    setReco(response.data.tracks); \r\n    setSelected(genres)\r\n  });\r\n}\r\n\r\n\r\n  console.log(Recommendations)\r\n\r\n  return (\r\n    <div className='cards'>\r\n      <h1>Recommended for you</h1>\r\n\r\n      <div className='btn__container'>\r\n        <div className='btn__wrapper'>\r\n          <ul className='btn__items'>\r\n            {genres.map(genre => \r\n              <li className='cards__item'>\r\n                <div className='cards__item__link'>\r\n                  {genre}\r\n                </div>\r\n              </li>\r\n            )}\r\n          </ul> \r\n        </div>\r\n      </div>\r\n      \r\n      <li \r\n      className='reco-nav-item'\r\n      onMouseEnter={onMouseEnter}\r\n      onMouseLeave={onMouseLeave}\r\n      >\r\n        <Link \r\n        className='reco-nav-links'\r\n        >\r\n          Genres  <i className='fas fa-caret-down'/>\r\n        </Link>\r\n        {dropdown && <RecoDropdown/>}      \r\n        </li>\r\n      <div className='cards__container'>\r\n        <div className='cards__wrapper'>\r\n        {\r\n          Recommendations.length === 0 ? (\r\n          reco(Artits_reco_id[0], (genres.slice(0, 3).join()).replace(/ /g, \"%20\"), Tracks_reco_id[0])\r\n          ):(\r\n          <ul className='cards__items'>\r\n          {\r\n              Recommendations.map(reco => (\r\n              <RecomItem\r\n                src={reco.album.images[0].url}\r\n                text={reco.name}\r\n                path = {reco.external_urls.spotify} \r\n                label = {count++}\r\n                text1 = {reco.album.artists[0].name}\r\n                />\r\n              ))\r\n            }\r\n          </ul>\r\n          )}\r\n        </div>\r\n      </div> \r\n    </div> \r\n  );\r\n}\r\n\r\nexport default Recommendations;\r\n"]},"metadata":{},"sourceType":"module"}